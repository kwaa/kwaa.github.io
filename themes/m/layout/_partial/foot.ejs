<%- js(theme.vendors.mdui_js) %>
<% if(theme.plugins.pangu) { %>
    <script src="<%= theme.vendors.pangu_js %>"></script>
<% } if(theme.plugins.script) { theme.plugins.script.forEach(function(link) { %>
    <script src="<%= link %>"></script>
<% })} %>
<script>
    var $ = mdui.$;
    function init(){
        <% if(theme.plugins.pangu == true) { %>
        pangu.autoSpacingPage();
        <% } %>
    }
    window.onload = function () {
        <% if(theme.plugins.pwa == true) { %>
        if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register("<%= url_for('/sw.js') %>");
        }<% } %>init()}
</script>
<% if(theme.plugins.pjax == true) { %>
<%- js(theme.vendors.pjax_js) %>
<script>
    var pjax = new Pjax({
        selectors: ["title",<% if(config.description) { %>"meta[name=description]",<% } %>"main"],
        switches: {
            "main": function(oldEl, newEl) {
                $('.mdui-container-fluid').css('opacity', '0');
                setTimeout(() => {
                    oldEl.innerHTML = newEl.innerHTML;
                    $('.mdui-container-fluid').css('opacity', '1');
                    this.onSwitch();
                    init();
                },400);
            },
        },
        cacheBust: false,
    });
</script>
<% } %>