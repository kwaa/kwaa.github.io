<%- js(theme.vendors.mdui_js) %>
<% if(theme.plugins.pangu == true) { %>
    <%- js(theme.vendors.pangu_js) %>
<% } if(theme.plugins.script) { theme.plugins.script.forEach(function(link) { %>
    <script src="<%= link %>"></script>
<% })} %>
<script>
    var $ = mdui.$;
    <% if(theme.plugins.pwa == true) { %>
    if ('serviceWorker' in navigator) {
    window.onload = function () {
        navigator.serviceWorker.register("<%= url_for('/sw.js') %>");
    };}
    <% } %>
    function fadeIn() {
        $(".mdui-container-fluid").css('opacity', '1');
        <% if(theme.plugins.pangu == true) { %>
            pangu.autoSpacingPage();
        <% } if(theme.m.init) { %>
            <%- theme.m.init %>
        <% } %>
    };fadeIn()
</script>
<% if(theme.plugins.pjax == true) { %>
<%- js(theme.vendors.pjax_js) %>
<script>
    var pjax = new Pjax({
        selectors: [
            "title",
            <% if(config.description) { %>"meta[name=description]",<% } %>
            "#main"
        ],
        cacheBust: false,
    })
    function fadeOut() {
        $(".mdui-container-fluid").css('opacity', '0');
    }
    document.addEventListener('pjax:send', fadeOut)
    document.addEventListener("pjax:complete", fadeIn)
</script>
<% } %>